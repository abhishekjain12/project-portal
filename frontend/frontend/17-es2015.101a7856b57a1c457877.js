(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{GJOd:function(t,e,n){"use strict";n.r(e),n.d(e,"ProjectModule",(function(){return ye}));var c=n("ofXK"),a=n("tyNb"),o=n("M9IT"),i=n("Dh3D"),r=n("quSY"),l=n("+0xr"),s=n("OFCM"),b=n("v5lj"),u=n("aR35"),d=n("AytR"),m=n("TnV5"),p=n("/NcY"),g=n("0IaG"),h=n("fXoL"),f=n("0Adz"),T=n("HXqD"),C=n("h/T5"),U=n("2+UW"),D=n("aSTP"),S=n("3Pt+"),v=n("kmnG"),j=n("qFsG"),I=n("d3UM"),y=n("iadO"),M=n("XiUz"),w=n("bTqV"),_=n("FKr1");function P(t,e){1&t&&(h.Ub(0,"small",25),h.Dc(1,"Title is required."),h.Tb())}function R(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,P,2,0,"small",24),h.Tb()),2&t){h.gc();const t=h.tc(11);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function O(t,e){1&t&&(h.Ub(0,"small",25),h.Dc(1,"Description is required."),h.Tb())}function A(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,O,2,0,"small",24),h.Tb()),2&t){h.gc();const t=h.tc(18);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function E(t,e){if(1&t&&(h.Ub(0,"mat-option",26),h.Dc(1),h.Ub(2,"i"),h.Dc(3),h.Tb(),h.Tb()),2&t){const t=e.$implicit;h.nc("value",t),h.Cb(1),h.Fc(" ",null==t?null:t.name," \xa0 "),h.Cb(2),h.Fc("(",null==t?null:t.description,")")}}function k(t,e){1&t&&(h.Ub(0,"small",25),h.Dc(1,"Category is required."),h.Tb())}function F(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,k,2,0,"small",24),h.Tb()),2&t){h.gc();const t=h.tc(24);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function L(t,e){1&t&&(h.Ub(0,"small",25),h.Dc(1,"City is required."),h.Tb())}function N(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,L,2,0,"small",24),h.Tb()),2&t){h.gc();const t=h.tc(50);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function q(t,e){1&t&&(h.Ub(0,"small",25),h.Dc(1,"Country is required."),h.Tb())}function x(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,q,2,0,"small",24),h.Tb()),2&t){h.gc();const t=h.tc(57);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}let J=(()=>{class t{constructor(t,e,n,c,a,o){this.dialogRef=t,this.data=e,this.projectService=n,this.categoryService=c,this.alertService=a,this.storageService=o,this.subscription=new r.a,this.filterModel=new m.b,this.project=new b.c,this.isDisableBtn=!1,this.filterModel.filters.push(new m.a(s.a.STATUS,s.a.EQ,!0))}ngOnInit(){this.project=this.data,this.getProjectCategory()}getProjectCategory(){this.subscription.add(this.categoryService.getFilteredCategories(this.filterModel).subscribe(t=>{this.categories=t.objects}))}saveProject(){this.isDisableBtn=!0,this.project.last_updated_by=this.storageService.getUserName(),this.subscription.add(this.projectService.updateProject(this.project).subscribe(()=>{this.closeModal(!0),this.isDisableBtn=!1},t=>{this.alertService.error(t.error.message),this.isDisableBtn=!1}))}compareFn(t,e){return t&&e?t.id===e.id:t===e}closeModal(t=!1){this.dialogRef.close(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(g.f),h.Ob(g.a),h.Ob(f.a),h.Ob(T.a),h.Ob(C.a),h.Ob(U.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-save-project-modal"]],decls:64,vars:19,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["projectForm","ngForm"],["matInput","","placeholder","Title","name","title","required","",3,"ngModel","ngModelChange"],["title","ngModel"],[4,"ngIf"],["matInput","","placeholder","Description","name","description","required","",3,"ngModel","ngModelChange"],["description","ngModel"],["placeholder","Select Category","name","category","multiple","","required","",3,"ngModel","compareWith","ngModelChange"],["category","ngModel"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Platform","name","platform",3,"ngModel","ngModelChange"],["for","deadline"],["id","deadline","matInput","","name","deadline",3,"matDatepicker","ngModel","focus","click","ngModelChange"],["matSuffix","",3,"for"],["fDate",""],["matInput","","placeholder","Weekdays, business hours","name","availability",3,"ngModel","ngModelChange"],["matInput","","placeholder","City","name","city","required","",3,"ngModel","ngModelChange"],["city","ngModel"],["matInput","","placeholder","Country","name","country","required","",3,"ngModel","ngModelChange"],["country","ngModel"],["mat-dialog-actions","","fxLayoutAlign","end"],["mat-flat-button","",3,"click"],["color","primary","mat-raised-button","",3,"ngClass","disabled","click"],["class","mat-text-warn",4,"ngIf"],[1,"mat-text-warn"],[3,"value"]],template:function(t,e){if(1&t){const t=h.Vb();h.Ub(0,"h1",0),h.Dc(1,"Edit Project"),h.Tb(),h.Ub(2,"div",1),h.Pb(3,"app-alert"),h.Ub(4,"form",null,2),h.Ub(6,"mat-form-field"),h.Ub(7,"mat-label"),h.Dc(8,"Title"),h.Tb(),h.Ub(9,"label"),h.Ub(10,"input",3,4),h.cc("ngModelChange",(function(t){return e.project.title=t})),h.Tb(),h.Tb(),h.Cc(12,R,2,1,"mat-error",5),h.Tb(),h.Ub(13,"mat-form-field"),h.Ub(14,"mat-label"),h.Dc(15,"Description"),h.Tb(),h.Ub(16,"label"),h.Ub(17,"textarea",6,7),h.cc("ngModelChange",(function(t){return e.project.description=t})),h.Tb(),h.Tb(),h.Cc(19,A,2,1,"mat-error",5),h.Tb(),h.Ub(20,"mat-form-field"),h.Ub(21,"mat-label"),h.Dc(22,"Category"),h.Tb(),h.Ub(23,"mat-select",8,9),h.cc("ngModelChange",(function(t){return e.project.category=t})),h.Cc(25,E,4,3,"mat-option",10),h.Tb(),h.Cc(26,F,2,1,"mat-error",5),h.Tb(),h.Ub(27,"mat-form-field"),h.Ub(28,"mat-label"),h.Dc(29,"Target Platform and language"),h.Tb(),h.Ub(30,"label"),h.Ub(31,"input",11),h.cc("ngModelChange",(function(t){return e.project.platform=t})),h.Tb(),h.Tb(),h.Tb(),h.Ub(32,"mat-form-field"),h.Ub(33,"mat-label"),h.Dc(34,"Required completion date"),h.Tb(),h.Pb(35,"label",12),h.Ub(36,"input",13),h.cc("focus",(function(){return h.vc(t),h.tc(39).open()}))("click",(function(){return h.vc(t),h.tc(39).open()}))("ngModelChange",(function(t){return e.project.deadline=t})),h.Tb(),h.Pb(37,"mat-datepicker-toggle",14),h.Pb(38,"mat-datepicker",null,15),h.Tb(),h.Ub(40,"mat-form-field"),h.Ub(41,"mat-label"),h.Dc(42,"Availability"),h.Tb(),h.Ub(43,"label"),h.Ub(44,"input",16),h.cc("ngModelChange",(function(t){return e.project.availability=t})),h.Tb(),h.Tb(),h.Tb(),h.Ub(45,"mat-form-field"),h.Ub(46,"mat-label"),h.Dc(47,"City"),h.Tb(),h.Ub(48,"label"),h.Ub(49,"input",17,18),h.cc("ngModelChange",(function(t){return e.project.city=t})),h.Tb(),h.Tb(),h.Cc(51,N,2,1,"mat-error",5),h.Tb(),h.Ub(52,"mat-form-field"),h.Ub(53,"mat-label"),h.Dc(54,"Country"),h.Tb(),h.Ub(55,"label"),h.Ub(56,"input",19,20),h.cc("ngModelChange",(function(t){return e.project.country=t})),h.Tb(),h.Tb(),h.Cc(58,x,2,1,"mat-error",5),h.Tb(),h.Tb(),h.Tb(),h.Ub(59,"div",21),h.Ub(60,"button",22),h.cc("click",(function(){return e.closeModal()})),h.Dc(61,"Cancel"),h.Tb(),h.Ub(62,"button",23),h.cc("click",(function(){return e.saveProject()})),h.Dc(63," Submit "),h.Tb(),h.Tb()}if(2&t){const t=h.tc(5),n=h.tc(11),c=h.tc(18),a=h.tc(24),o=h.tc(39),i=h.tc(50),r=h.tc(57);h.Cb(10),h.nc("ngModel",e.project.title),h.Cb(2),h.nc("ngIf",n.touched&&n.invalid),h.Cb(5),h.nc("ngModel",e.project.description),h.Cb(2),h.nc("ngIf",c.touched&&c.invalid),h.Cb(4),h.nc("ngModel",e.project.category)("compareWith",e.compareFn),h.Cb(2),h.nc("ngForOf",e.categories),h.Cb(1),h.nc("ngIf",a.touched&&a.invalid),h.Cb(5),h.nc("ngModel",e.project.platform),h.Cb(5),h.nc("matDatepicker",o)("ngModel",e.project.deadline),h.Cb(1),h.nc("for",o),h.Cb(7),h.nc("ngModel",e.project.availability),h.Cb(5),h.nc("ngModel",e.project.city),h.Cb(2),h.nc("ngIf",i.touched&&i.invalid),h.Cb(5),h.nc("ngModel",e.project.country),h.Cb(2),h.nc("ngIf",r.touched&&r.invalid),h.Cb(4),h.nc("ngClass",t.form.invalid?"cursor-not-allowed":"cursor-pointer")("disabled",t.form.invalid||e.isDisableBtn)}},directives:[g.g,g.d,D.a,S.r,S.l,S.m,v.c,v.g,j.b,S.b,S.p,S.k,S.n,c.l,I.a,c.k,y.b,y.d,v.h,y.a,g.c,M.b,w.b,c.j,v.b,_.n],styles:[""]}),t})();var B=n("g0ew"),V=n("gaWP"),H=n("Wp6s"),$=n("f0Cb"),z=n("NFeN"),W=n("gX+F"),Q=n("A5z7"),G=n("STbY");function X(t,e){if(1&t){const t=h.Vb();h.Ub(0,"button",18),h.cc("click",(function(){return h.vc(t),h.gc().clearFilter()})),h.Dc(1,"Clear filter "),h.Ub(2,"mat-icon"),h.Dc(3,"close"),h.Tb(),h.Tb()}}function Y(t,e){1&t&&(h.Ub(0,"div",19),h.Pb(1,"app-spinner"),h.Tb())}function K(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," ID "),h.Tb())}function Z(t,e){if(1&t&&(h.Ub(0,"td",21),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",t.id," ")}}function tt(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," Title "),h.Tb())}function et(t,e){if(1&t&&(h.Ub(0,"td",21),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",t.title," ")}}function nt(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," Description "),h.Tb())}function ct(t,e){if(1&t&&(h.Ub(0,"td",21),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",t.description," ")}}function at(t,e){1&t&&(h.Ub(0,"th",22),h.Dc(1," Category "),h.Tb())}function ot(t,e){if(1&t&&(h.Ub(0,"mat-chip",25),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Ec(t.name)}}function it(t,e){if(1&t&&(h.Ub(0,"td",21),h.Ub(1,"mat-chip-list",23),h.Cc(2,ot,2,1,"mat-chip",24),h.Tb(),h.Tb()),2&t){const t=e.$implicit;h.Cb(2),h.nc("ngForOf",t.category)}}function rt(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," Status "),h.Tb())}function lt(t,e){if(1&t&&(h.Ub(0,"td",21),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",t.status," ")}}function st(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," Updated At "),h.Tb())}function bt(t,e){if(1&t&&(h.Ub(0,"td",21),h.Dc(1),h.hc(2,"date"),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",h.ic(2,1,t.updated_at)," ")}}function ut(t,e){1&t&&(h.Ub(0,"th",20),h.Dc(1," Action "),h.Tb())}function dt(t,e){if(1&t){const t=h.Vb();h.Ub(0,"button",32),h.cc("click",(function(){h.vc(t);const e=h.gc().$implicit;return h.gc().openProjectModal(e)})),h.Ub(1,"mat-icon"),h.Dc(2,"edit"),h.Tb(),h.Ub(3,"span"),h.Dc(4,"Edit details"),h.Tb(),h.Tb()}}const mt=function(t){return[t]};function pt(t,e){if(1&t){const t=h.Vb();h.Ub(0,"td",21),h.Ub(1,"button",26),h.Ub(2,"mat-icon"),h.Dc(3,"more_vert"),h.Tb(),h.Tb(),h.Ub(4,"mat-menu",null,27),h.Ub(6,"a",28),h.Ub(7,"mat-icon"),h.Dc(8,"visibility"),h.Tb(),h.Ub(9,"span"),h.Dc(10,"View details"),h.Tb(),h.Tb(),h.Ub(11,"button",29),h.cc("click",(function(){h.vc(t);const n=e.$implicit;return h.gc().downloadFile(n)})),h.Ub(12,"mat-icon"),h.Dc(13,"get_app"),h.Tb(),h.Ub(14,"span"),h.Dc(15,"Download attachment"),h.Tb(),h.Tb(),h.Cc(16,dt,5,0,"button",30),h.Ub(17,"a",31),h.Ub(18,"mat-icon"),h.Dc(19,"assignment_ind"),h.Tb(),h.Ub(20,"span"),h.Dc(21,"View Project Author"),h.Tb(),h.Tb(),h.Ub(22,"a",31),h.Ub(23,"mat-icon"),h.Dc(24,"school"),h.Tb(),h.Ub(25,"span"),h.Dc(26,"View Interested Students"),h.Tb(),h.Tb(),h.Ub(27,"a",31),h.Ub(28,"mat-icon"),h.Dc(29,"school"),h.Tb(),h.Ub(30,"span"),h.Dc(31,"View Approved Students"),h.Tb(),h.Tb(),h.Tb(),h.Tb()}if(2&t){const t=e.$implicit,n=h.tc(5),c=h.gc();h.Cb(1),h.nc("matMenuTriggerFor",n),h.Cb(5),h.nc("routerLink",h.pc(10,mt,t.id)),h.Cb(5),h.nc("disabled",!(null!=t&&t.file_name)),h.Cb(5),h.nc("ngIf",c.loggedInRoles.isAdmin||c.loggedInRoles.isSecondLevel||c.loggedInRoles.isThirdLevel),h.Cb(1),h.nc("routerLink",h.pc(12,mt,c.PROPOSAL_AUTHOR_URL))("queryParams",c.getAuthorURLForID(t.id)),h.Cb(5),h.nc("routerLink",h.pc(14,mt,c.STUDENT_URL))("queryParams",c.getStudentsForID(t.id,c.STUDENT_STATUS.INTERESTED)),h.Cb(5),h.nc("routerLink",h.pc(16,mt,c.STUDENT_URL))("queryParams",c.getStudentsForID(t.id,c.STUDENT_STATUS.APPROVED))}}function gt(t,e){1&t&&h.Pb(0,"tr",33)}function ht(t,e){1&t&&h.Pb(0,"tr",34)}function ft(t,e){1&t&&(h.Ub(0,"div"),h.Ub(1,"h3",35),h.Dc(2,"No data found."),h.Tb(),h.Tb())}let Tt=(()=>{class t{constructor(t,e,n,c,a,o){this.projectService=t,this.spinnerService=e,this.activatedRoute=n,this.dialog=c,this.router=a,this.sharedService=o,this.subscription=new r.a,this.filterModel=new m.b,this.loggedInRoles=new p.a,this.displayedColumns=b.f,this.pageSize=s.a.PAGE_SIZE_LIST,this.PROPOSAL_AUTHOR_URL=u.a.PROPOSAL_AUTHOR,this.STUDENT_URL=u.a.STUDENT,this.STUDENT_STATUS=s.a.STUDENT_STATUS,this.isFiltered=!1,this.filterModel.order_by.push(new m.d)}ngOnInit(){this.sharedService.refreshGetRoles(),this.subscription.add(this.sharedService.getLoggedInRoles.subscribe(t=>{this.loggedInRoles=t})),this.activatedRoute.snapshot.queryParamMap.get("q")&&(this.isFiltered=!0,this.filterModel.filters.push(JSON.parse(this.activatedRoute.snapshot.queryParamMap.get("q")))),this.getFilteredProjects()}applyFilter(t){this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}clearFilter(){this.isFiltered=!1,this.filterModel=new m.b,this.filterModel.order_by.push(new m.d),this.getFilteredProjects(),this.router.navigate([u.a.PROJECT]).then()}getFilteredProjects(){this.spinnerService.show(),this.subscription.add(this.projectService.getFilteredProjects(this.filterModel).subscribe(t=>{this.dataSource=new l.k(t.objects),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.spinnerService.hide()}))}downloadFile(t){window.location.href=d.a.HOST+u.a.PROJECT_DOWNLOAD_API+t.file_name}getAuthorURLForID(t){return{q:JSON.stringify(new m.a(s.a.PROJECTS,s.a.ANY,new m.a(s.a.ID,s.a.EQ,t)))}}getStudentsForID(t,e){const n=new m.b;return n.filters.push(new m.a(s.a.PROJECTS,s.a.HAS,new m.a(s.a.ID,s.a.EQ,t))),n.filters.push(new m.a(s.a.STATUS,s.a.EQ,e)),{q:JSON.stringify(n)}}openProjectModal(t=null){this.dialog.open(J,{width:s.a.MODAL_WIDTH,data:t}).afterClosed().subscribe(t=>{t&&this.getFilteredProjects()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(f.a),h.Ob(B.a),h.Ob(a.a),h.Ob(g.b),h.Ob(a.c),h.Ob(V.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-project"]],viewQuery:function(t,e){var n;1&t&&(h.Ic(o.a,!0),h.Ic(i.a,!0)),2&t&&(h.sc(n=h.dc())&&(e.paginator=n.first),h.sc(n=h.dc())&&(e.sort=n.first))},decls:38,vars:17,consts:[[1,"mat-elevation-z1","m-auto","w-90","mt-2","p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-1"],[1,"m-auto"],["mat-flat-button","",3,"click",4,"ngIf"],[1,"mt-1"],["matInput","","placeholder","Filter",3,"keyup"],[1,"pos-relative","overflow-auto"],["class","table-spinner",4,"ngIf"],["mat-table","","matSort","","matSortDirection","desc",1,"mt-1","overflow-auto",3,"dataSource","matSortActive"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["stickyEnd","",3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"pageSizeOptions"],["mat-flat-button","",3,"click"],[1,"table-spinner"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["aria-label","categories"],["disableRipple","",4,"ngFor","ngForOf"],["disableRipple",""],["mat-icon-button","","aria-label","action menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"routerLink","queryParams"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-card-subtitle","text-center","mt-1"]],template:function(t,e){1&t&&(h.Ub(0,"mat-card",0),h.Ub(1,"mat-card-header",1),h.Ub(2,"mat-card-title",2),h.Dc(3,"Projects"),h.Tb(),h.Cc(4,X,4,0,"button",3),h.Tb(),h.Pb(5,"mat-divider"),h.Ub(6,"mat-form-field",4),h.Ub(7,"label"),h.Ub(8,"input",5),h.cc("keyup",(function(t){return e.applyFilter(t.target.value)})),h.Tb(),h.Tb(),h.Tb(),h.Ub(9,"div",6),h.Cc(10,Y,2,0,"div",7),h.hc(11,"async"),h.Ub(12,"table",8),h.Sb(13,9),h.Cc(14,K,2,0,"th",10),h.Cc(15,Z,2,1,"td",11),h.Rb(),h.Sb(16,9),h.Cc(17,tt,2,0,"th",10),h.Cc(18,et,2,1,"td",11),h.Rb(),h.Sb(19,9),h.Cc(20,nt,2,0,"th",10),h.Cc(21,ct,2,1,"td",11),h.Rb(),h.Sb(22,9),h.Cc(23,at,2,0,"th",12),h.Cc(24,it,3,1,"td",11),h.Rb(),h.Sb(25,9),h.Cc(26,rt,2,0,"th",10),h.Cc(27,lt,2,1,"td",11),h.Rb(),h.Sb(28,9),h.Cc(29,st,2,0,"th",10),h.Cc(30,bt,3,3,"td",11),h.Rb(),h.Sb(31,13),h.Cc(32,ut,2,0,"th",10),h.Cc(33,pt,32,18,"td",11),h.Rb(),h.Cc(34,gt,1,0,"tr",14),h.Cc(35,ht,1,0,"tr",15),h.Tb(),h.Cc(36,ft,3,0,"div",16),h.Pb(37,"mat-paginator",17),h.Tb(),h.Tb()),2&t&&(h.Cb(4),h.nc("ngIf",e.isFiltered),h.Cb(6),h.nc("ngIf",h.ic(11,15,e.spinnerService.visibility)),h.Cb(2),h.nc("dataSource",e.dataSource)("matSortActive",e.displayedColumns[5]),h.Cb(1),h.nc("matColumnDef",e.displayedColumns[0]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[1]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[2]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[3]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[4]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[5]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[6]),h.Cb(3),h.nc("matHeaderRowDef",e.displayedColumns),h.Cb(1),h.nc("matRowDefColumns",e.displayedColumns),h.Cb(1),h.nc("ngIf",0===(null==e.dataSource?null:e.dataSource.data.length)),h.Cb(1),h.nc("pageSizeOptions",e.pageSize))},directives:[H.a,H.d,M.c,M.b,H.g,c.l,$.a,v.c,j.b,l.j,i.a,l.c,l.e,l.b,l.g,l.i,o.a,w.b,z.a,W.a,l.d,i.b,l.a,Q.c,c.k,Q.a,G.c,G.d,a.f,G.a,l.f,l.h],pipes:[c.b,c.e],styles:[""]}),t})();var Ct=n("1jcm");function Ut(t,e){1&t&&(h.Ub(0,"small",12),h.Dc(1,"Comment is required."),h.Tb())}function Dt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Ut,2,0,"small",11),h.Tb()),2&t){h.gc();const t=h.tc(9);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}let St=(()=>{class t{constructor(t,e,n,c,a){this.dialogRef=t,this.data=e,this.projectService=n,this.alertService=c,this.storageService=a,this.subscription=new r.a,this.projectComment=new b.d,this.isDisableBtn=!1}ngOnInit(){this.projectComment=this.data}saveComment(){this.isDisableBtn=!0,this.projectComment.last_updated_by=this.storageService.getUserName(),this.projectComment.commented_by=Number(this.storageService.getUserId()),this.subscription.add(this.projectService.createComment(this.projectComment).subscribe(()=>{this.closeModal(!0),this.isDisableBtn=!1},t=>{this.alertService.error(t.error.message),this.isDisableBtn=!1}))}closeModal(t=!1){this.dialogRef.close(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(g.f),h.Ob(g.a),h.Ob(f.a),h.Ob(C.a),h.Ob(U.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-action-modal"]],decls:19,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["actionForm","ngForm"],["matInput","","placeholder","Comment","name","comment","required","",3,"ngModel","ngModelChange"],["comment","ngModel"],[4,"ngIf"],["color","primary","name","sent_email",3,"ngModel","ngModelChange"],["mat-dialog-actions","","fxLayoutAlign","end"],["mat-flat-button","",3,"click"],["color","primary","mat-raised-button","",3,"ngClass","disabled","click"],["class","mat-text-warn",4,"ngIf"],[1,"mat-text-warn"]],template:function(t,e){if(1&t&&(h.Ub(0,"h1",0),h.Dc(1),h.Tb(),h.Ub(2,"div",1),h.Pb(3,"app-alert"),h.Ub(4,"form",2,3),h.cc("ngSubmit",(function(){return e.saveComment()})),h.Ub(6,"mat-form-field"),h.Ub(7,"label"),h.Ub(8,"textarea",4,5),h.cc("ngModelChange",(function(t){return e.projectComment.text=t})),h.Dc(10,"        "),h.Tb(),h.Tb(),h.Cc(11,Dt,2,1,"mat-error",6),h.Tb(),h.Ub(12,"mat-slide-toggle",7),h.cc("ngModelChange",(function(t){return e.projectComment.sent_email=t})),h.Dc(13," Send an email to Project author "),h.Tb(),h.Tb(),h.Tb(),h.Ub(14,"div",8),h.Ub(15,"button",9),h.cc("click",(function(){return e.closeModal()})),h.Dc(16,"Cancel"),h.Tb(),h.Ub(17,"button",10),h.cc("click",(function(){return e.saveComment()})),h.Dc(18," Submit "),h.Tb(),h.Tb()),2&t){const t=h.tc(5),n=h.tc(9);h.Cb(1),h.Fc("Comment on ",null==e.projectComment?null:e.projectComment.project_status," Action"),h.Cb(7),h.nc("ngModel",e.projectComment.text),h.Cb(3),h.nc("ngIf",n.touched&&n.invalid),h.Cb(1),h.nc("ngModel",e.projectComment.sent_email),h.Cb(5),h.nc("ngClass",t.form.invalid?"cursor-not-allowed":"cursor-pointer")("disabled",t.form.invalid||e.isDisableBtn)}},directives:[g.g,g.d,D.a,S.r,S.l,S.m,v.c,j.b,S.b,S.p,S.k,S.n,c.l,Ct.a,g.c,M.b,w.b,c.j,v.b],styles:[""]}),t})();var vt=n("PpXk"),jt=n("vc2v");function It(t,e){1&t&&(h.Ub(0,"small",16),h.Dc(1,"Recipient is required."),h.Tb())}function yt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,It,2,0,"small",15),h.Tb()),2&t){h.gc();const t=h.tc(10);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function Mt(t,e){1&t&&(h.Ub(0,"small",16),h.Dc(1,"Author is required."),h.Tb())}function wt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Mt,2,0,"small",15),h.Tb()),2&t){h.gc();const t=h.tc(4);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function _t(t,e){if(1&t){const t=h.Vb();h.Ub(0,"mat-form-field"),h.Ub(1,"mat-label"),h.Dc(2,"Select the Author"),h.Tb(),h.Ub(3,"mat-select",17,18),h.cc("ngModelChange",(function(e){return h.vc(t),h.gc().projectAuthor=e})),h.Ub(5,"mat-option",6),h.Dc(6),h.Ub(7,"i"),h.Dc(8),h.Tb(),h.Tb(),h.Tb(),h.Cc(9,wt,2,1,"mat-error",7),h.Tb()}if(2&t){const t=h.tc(4),e=h.gc();h.Cb(3),h.nc("ngModel",e.projectAuthor),h.Cb(2),h.nc("value",e.data.proposal_authors),h.Cb(1),h.Fc(" ",e.data.proposal_authors.name," \xa0 "),h.Cb(2),h.Fc("(",e.data.proposal_authors.email,")"),h.Cb(1),h.nc("ngIf",t.touched&&t.invalid)}}function Pt(t,e){if(1&t&&(h.Ub(0,"mat-option",6),h.Dc(1),h.Ub(2,"i"),h.Dc(3),h.Tb(),h.Tb()),2&t){const t=e.$implicit;h.nc("value",t),h.Cb(1),h.Fc(" ",t.name," \xa0 "),h.Cb(2),h.Fc("(",t.email,")")}}function Rt(t,e){1&t&&(h.Ub(0,"small",16),h.Dc(1,"Student is required."),h.Tb())}function Ot(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Rt,2,0,"small",15),h.Tb()),2&t){h.gc();const t=h.tc(4);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function At(t,e){if(1&t){const t=h.Vb();h.Ub(0,"mat-form-field"),h.Ub(1,"mat-label"),h.Dc(2,"Select the Student"),h.Tb(),h.Ub(3,"mat-select",19,20),h.cc("ngModelChange",(function(e){return h.vc(t),h.gc().student=e})),h.Cc(5,Pt,4,3,"mat-option",21),h.Tb(),h.Cc(6,Ot,2,1,"mat-error",7),h.Tb()}if(2&t){const t=h.tc(4),e=h.gc();h.Cb(3),h.nc("ngModel",e.student),h.Cb(2),h.nc("ngForOf",e.data.students),h.Cb(1),h.nc("ngIf",t.touched&&t.invalid)}}function Et(t,e){1&t&&(h.Ub(0,"small",16),h.Dc(1,"Subject is required."),h.Tb())}function kt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Et,2,0,"small",15),h.Tb()),2&t){h.gc();const t=h.tc(21);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function Ft(t,e){1&t&&(h.Ub(0,"small",16),h.Dc(1,"Body is required."),h.Tb())}function Lt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Ft,2,0,"small",15),h.Tb()),2&t){h.gc();const t=h.tc(26);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}let Nt=(()=>{class t{constructor(t,e,n,c,a){this.dialogRef=t,this.data=e,this.projectService=n,this.alertService=c,this.storageService=a,this.subscription=new r.a,this.emailLog=new b.b,this.projectAuthor=new vt.a,this.student=new jt.a,this.isDisableBtn=!1,this.isAuthor=!0}ngOnInit(){this.emailLog.project=this.data.id,this.emailLog.sent_by=Number(this.storageService.getUserId()),this.emailLog.last_updated_by=this.storageService.getUserName()}sendEmail(){this.isDisableBtn=!0,this.isAuthor?(this.emailLog.proposal_author=this.projectAuthor.id,this.emailLog.email_to=this.projectAuthor.email):(this.emailLog.student=this.student.id,this.emailLog.email_to=this.student.email),this.subscription.add(this.projectService.createEmailLog(this.emailLog).subscribe(()=>{this.closeModal(!0),this.isDisableBtn=!1},t=>{this.alertService.error(t.error.message),this.isDisableBtn=!1}))}closeModal(t=!1){this.dialogRef.close(t)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(g.f),h.Ob(g.a),h.Ob(f.a),h.Ob(C.a),h.Ob(U.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-sent-email-modal"]],decls:34,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"ngSubmit"],["sentEmailForm","ngForm"],["placeholder","Select the recipient","name","isAuthor","required","",3,"ngModel","ngModelChange"],["recipient","ngModel"],[3,"value"],[4,"ngIf"],["matInput","","placeholder","Email Subject","name","subject","required","",3,"ngModel","ngModelChange"],["subject","ngModel"],["matInput","","placeholder","Email Body","name","body","required","",3,"ngModel","ngModelChange"],["body","ngModel"],["mat-dialog-actions","","fxLayoutAlign","end"],["mat-flat-button","",3,"click"],["color","primary","mat-raised-button","",3,"ngClass","disabled","click"],["class","mat-text-warn",4,"ngIf"],[1,"mat-text-warn"],["placeholder","Select the Author","name","projectAuthor","required","",3,"ngModel","ngModelChange"],["author","ngModel"],["placeholder","Select the Student","name","student","required","",3,"ngModel","ngModelChange"],["student_","ngModel"],[3,"value",4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(h.Ub(0,"h1",0),h.Dc(1,"Send an email"),h.Tb(),h.Ub(2,"div",1),h.Pb(3,"app-alert"),h.Ub(4,"form",2,3),h.cc("ngSubmit",(function(){return e.sendEmail()})),h.Ub(6,"mat-form-field"),h.Ub(7,"mat-label"),h.Dc(8,"Select the recipient"),h.Tb(),h.Ub(9,"mat-select",4,5),h.cc("ngModelChange",(function(t){return e.isAuthor=t})),h.Ub(11,"mat-option",6),h.Dc(12,"Project Author"),h.Tb(),h.Ub(13,"mat-option",6),h.Dc(14,"Student"),h.Tb(),h.Tb(),h.Cc(15,yt,2,1,"mat-error",7),h.Tb(),h.Cc(16,_t,10,5,"mat-form-field",7),h.Cc(17,At,7,3,"mat-form-field",7),h.Ub(18,"mat-form-field"),h.Ub(19,"label"),h.Ub(20,"input",8,9),h.cc("ngModelChange",(function(t){return e.emailLog.subject=t})),h.Tb(),h.Tb(),h.Cc(22,kt,2,1,"mat-error",7),h.Tb(),h.Ub(23,"mat-form-field"),h.Ub(24,"label"),h.Ub(25,"textarea",10,11),h.cc("ngModelChange",(function(t){return e.emailLog.body=t})),h.Dc(27,"        "),h.Tb(),h.Tb(),h.Cc(28,Lt,2,1,"mat-error",7),h.Tb(),h.Tb(),h.Tb(),h.Ub(29,"div",12),h.Ub(30,"button",13),h.cc("click",(function(){return e.closeModal()})),h.Dc(31,"Cancel"),h.Tb(),h.Ub(32,"button",14),h.cc("click",(function(){return e.sendEmail()})),h.Dc(33," Send "),h.Tb(),h.Tb()),2&t){const t=h.tc(5),n=h.tc(10),c=h.tc(21),a=h.tc(26);h.Cb(9),h.nc("ngModel",e.isAuthor),h.Cb(2),h.nc("value",!0),h.Cb(2),h.nc("value",!1),h.Cb(2),h.nc("ngIf",n.touched&&n.invalid),h.Cb(1),h.nc("ngIf",e.isAuthor),h.Cb(1),h.nc("ngIf",!e.isAuthor),h.Cb(3),h.nc("ngModel",e.emailLog.subject),h.Cb(2),h.nc("ngIf",c.touched&&c.invalid),h.Cb(3),h.nc("ngModel",e.emailLog.body),h.Cb(3),h.nc("ngIf",a.touched&&a.invalid),h.Cb(4),h.nc("ngClass",t.form.invalid?"cursor-not-allowed":"cursor-pointer")("disabled",t.form.invalid||e.isDisableBtn)}},directives:[g.g,g.d,D.a,S.r,S.l,S.m,v.c,v.g,I.a,S.p,S.k,S.n,_.n,c.l,j.b,S.b,g.c,M.b,w.b,c.j,v.b,c.k],styles:[""]}),t})();var qt=n("Qu3c"),xt=n("MutI"),Jt=n("wZkO");let Bt=(()=>{class t{transform(t,...e){if(t){const e=Math.floor((+new Date-+new Date(t))/1e3);if(e<29)return"Just now";const n={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1};let c;for(const t in n)if(c=Math.floor(e/n[t]),c>0)return 1===c?c+" "+t+" ago":c+" "+t+"s ago"}return t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=h.Nb({name:"dateAgo",type:t,pure:!0}),t})();function Vt(t,e){if(1&t){const t=h.Vb();h.Ub(0,"button",54),h.cc("click",(function(){return h.vc(t),h.gc().openProjectModal()})),h.Ub(1,"mat-icon"),h.Dc(2,"edit"),h.Tb(),h.Tb()}}function Ht(t,e){if(1&t&&(h.Ub(0,"span",55),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",t.name," ")}}function $t(t,e){if(1&t){const t=h.Vb();h.Ub(0,"div",15),h.Ub(1,"mat-chip-list",5),h.Ub(2,"span",56),h.Dc(3,"Take Action"),h.Tb(),h.Ub(4,"mat-chip",57),h.cc("click",(function(){h.vc(t);const e=h.gc();return e.openCommentModal(e.PROJECT_STATUS.APPROVED)})),h.Ub(5,"mat-icon",58),h.Dc(6,"thumb_up"),h.Tb(),h.Dc(7," Approve "),h.Tb(),h.Ub(8,"mat-chip",59),h.cc("click",(function(){h.vc(t);const e=h.gc();return e.openCommentModal(e.PROJECT_STATUS.DECLINED)})),h.Ub(9,"mat-icon",58),h.Dc(10,"thumb_down"),h.Tb(),h.Dc(11," Decline "),h.Tb(),h.Ub(12,"mat-chip",60),h.cc("click",(function(){h.vc(t);const e=h.gc();return e.openCommentModal(e.PROJECT_STATUS.DEFERRED)})),h.Ub(13,"mat-icon",58),h.Dc(14,"timer"),h.Tb(),h.Dc(15," Defer "),h.Tb(),h.Ub(16,"mat-chip",61),h.cc("click",(function(){h.vc(t);const e=h.gc();return e.openCommentModal(e.PROJECT_STATUS.WITHDRAWN)})),h.Ub(17,"mat-icon",58),h.Dc(18,"undo"),h.Tb(),h.Dc(19," Withdraw "),h.Tb(),h.Ub(20,"mat-chip",62),h.cc("click",(function(){h.vc(t);const e=h.gc();return e.openCommentModal(e.PROJECT_STATUS.SKIPPED)})),h.Ub(21,"mat-icon",58),h.Dc(22,"fast_forward"),h.Tb(),h.Dc(23," Skip "),h.Tb(),h.Tb(),h.Tb()}}function zt(t,e){if(1&t){const t=h.Vb();h.Ub(0,"button",63),h.cc("click",(function(){return h.vc(t),h.gc().openSentEmailModal()})),h.Dc(1," Send an email "),h.Ub(2,"mat-icon"),h.Dc(3,"send"),h.Tb(),h.Tb()}}function Wt(t,e){1&t&&(h.Ub(0,"small",71),h.Dc(1,"Comment is required."),h.Tb())}function Qt(t,e){if(1&t&&(h.Ub(0,"mat-error"),h.Cc(1,Wt,2,0,"small",70),h.Tb()),2&t){h.gc();const t=h.tc(7);h.Cb(1),h.nc("ngIf",null==t?null:t.errors.required)}}function Gt(t,e){if(1&t){const t=h.Vb();h.Ub(0,"form",64,65),h.cc("ngSubmit",(function(){return h.vc(t),h.gc().saveComment()})),h.Ub(2,"mat-form-field",66),h.Ub(3,"mat-label"),h.Dc(4,"Add your comment"),h.Tb(),h.Ub(5,"label"),h.Ub(6,"textarea",67,68),h.cc("ngModelChange",(function(e){return h.vc(t),h.gc().projectComment.text=e})),h.Dc(8,"              "),h.Tb(),h.Tb(),h.Cc(9,Qt,2,1,"mat-error",43),h.Tb(),h.Ub(10,"button",69),h.cc("click",(function(){return h.vc(t),h.gc().saveComment()})),h.Dc(11," Submit "),h.Tb(),h.Tb()}if(2&t){const t=h.tc(1),e=h.tc(7),n=h.gc();h.Cb(6),h.nc("ngModel",n.projectComment.text),h.Cb(3),h.nc("ngIf",e.touched&&e.invalid),h.Cb(1),h.nc("ngClass",t.form.invalid?"cursor-not-allowed":"cursor-pointer")("disabled",t.form.invalid||n.isDisableBtn)}}function Xt(t,e){1&t&&(h.Ub(0,"mat-chip-avatar"),h.Ub(1,"mat-icon"),h.Dc(2,"school"),h.Tb(),h.Tb())}function Yt(t,e){1&t&&(h.Ub(0,"mat-chip-avatar"),h.Ub(1,"mat-icon"),h.Dc(2,"assignment"),h.Tb(),h.Tb())}function Kt(t,e){if(1&t&&(h.Ub(0,"mat-chip-list",5),h.Ub(1,"mat-chip",6),h.Cc(2,Xt,3,0,"mat-chip-avatar",43),h.Cc(3,Yt,3,0,"mat-chip-avatar",43),h.Dc(4),h.hc(5,"titlecase"),h.Tb(),h.Tb()),2&t){const t=h.gc().$implicit,e=h.gc();h.Cb(1),h.nc("ngClass",e.statusClassConditions(null==t?null:t.project_status)),h.Cb(1),h.nc("ngIf",t.student),h.Cb(1),h.nc("ngIf",t.project&&!t.student),h.Cb(1),h.Fc(" ",h.ic(5,4,null==t?null:t.project_status)," ")}}function Zt(t,e){1&t&&(h.Ub(0,"mat-icon",78),h.Dc(1,"mark_email_read"),h.Tb())}function te(t,e){if(1&t&&(h.Ub(0,"a",79),h.Dc(1),h.Tb()),2&t){const t=h.gc().$implicit,e=h.gc();h.nc("routerLink",e.STUDENT_URL)("queryParams",e.getStudentsForID(null==t||null==t.students?null:t.students.id)),h.Cb(1),h.Fc(" ",null==t||null==t.students?null:t.students.name," ")}}const ee=function(){return[]},ne=function(){return{}};function ce(t,e){if(1&t&&(h.Ub(0,"mat-card",15),h.Ub(1,"mat-card-header"),h.Pb(2,"div",72),h.Ub(3,"mat-card-title",73),h.Dc(4),h.hc(5,"titlecase"),h.Tb(),h.Ub(6,"mat-card-subtitle",74),h.Dc(7),h.hc(8,"dateAgo"),h.Tb(),h.Cc(9,Kt,6,6,"mat-chip-list",75),h.Cc(10,Zt,2,0,"mat-icon",76),h.Cc(11,te,2,3,"a",77),h.Tb(),h.Ub(12,"mat-card-content"),h.Ub(13,"p"),h.Dc(14),h.Tb(),h.Tb(),h.Tb()),2&t){const t=e.$implicit,n=h.gc();h.Cb(3),h.nc("matTooltip",null==t?null:t.staffs.email)("routerLink",n.loggedInRoles.isAdmin?n.STAFF_URL:h.oc(13,ee))("queryParams",n.loggedInRoles.isAdmin?n.getStaffURLForID(null==t?null:t.staffs.id):h.oc(14,ne)),h.Cb(1),h.Fc(" ",h.ic(5,9,null==t?null:t.staffs.name)," "),h.Cb(3),h.Fc(" ",h.ic(8,11,null==t?null:t.created_at)||"Not available"," "),h.Cb(2),h.nc("ngIf",null==t?null:t.project_status),h.Cb(1),h.nc("ngIf",t.sent_email),h.Cb(1),h.nc("ngIf",t.students),h.Cb(3),h.Ec(null==t?null:t.text)}}function ae(t,e){1&t&&(h.Ub(0,"div"),h.Ub(1,"h3",80),h.Dc(2," No comments."),h.Tb(),h.Tb())}function oe(t,e){1&t&&h.Pb(0,"th",81)}function ie(t,e){1&t&&(h.Ub(0,"mat-icon",85),h.Dc(1,"school"),h.Tb())}function re(t,e){1&t&&(h.Ub(0,"mat-icon",86),h.Dc(1,"assignment_ind"),h.Tb())}function le(t,e){if(1&t&&(h.Ub(0,"td",82),h.Cc(1,ie,2,0,"mat-icon",83),h.Cc(2,re,2,0,"mat-icon",84),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.nc("ngIf",null==t?null:t.student),h.Cb(1),h.nc("ngIf",null==t?null:t.proposal_author)}}function se(t,e){1&t&&(h.Ub(0,"th",87),h.Dc(1," Sent to "),h.Tb())}function be(t,e){if(1&t&&(h.Ub(0,"td",82),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",null==t?null:t.email_to," ")}}function ue(t,e){1&t&&(h.Ub(0,"th",87),h.Dc(1," Sent by "),h.Tb())}function de(t,e){if(1&t&&(h.Ub(0,"td",88),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.nc("matTooltip",null==t||null==t.staffs?null:t.staffs.email),h.Cb(1),h.Fc(" ",null==t||null==t.staffs?null:t.staffs.name," ")}}function me(t,e){1&t&&(h.Ub(0,"th",87),h.Dc(1," Subject "),h.Tb())}function pe(t,e){if(1&t&&(h.Ub(0,"td",82),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",null==t?null:t.subject,"")}}function ge(t,e){1&t&&(h.Ub(0,"th",87),h.Dc(1," Body "),h.Tb())}function he(t,e){if(1&t&&(h.Ub(0,"td",82),h.Dc(1),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",null==t?null:t.body," ")}}function fe(t,e){1&t&&(h.Ub(0,"th",87),h.Dc(1," Created At "),h.Tb())}function Te(t,e){if(1&t&&(h.Ub(0,"td",82),h.Dc(1),h.hc(2,"dateAgo"),h.Tb()),2&t){const t=e.$implicit;h.Cb(1),h.Fc(" ",h.ic(2,1,null==t?null:t.created_at)," ")}}function Ce(t,e){1&t&&h.Pb(0,"tr",89)}function Ue(t,e){1&t&&h.Pb(0,"tr",90)}function De(t,e){1&t&&(h.Ub(0,"div"),h.Ub(1,"h3",91),h.Dc(2,"No email found."),h.Tb(),h.Tb())}const Se=function(t){return[t]},ve=[{path:"",component:Tt},{path:":id",component:(()=>{class t{constructor(t,e,n,c,a,o,i){this.activatedRoute=t,this.projectService=e,this.dialog=n,this.location=c,this.alertService=a,this.storageService=o,this.sharedService=i,this.projectComment=new b.d,this.subscription=new r.a,this.commentModel=new b.a,this.filterModel=new m.b,this.loggedInRoles=new p.a,this.project=new b.c,this.displayedColumns=b.e,this.PROJECT_STATUS=s.a.PROJECT_STATUS,this.STUDENT_STATUS=s.a.STUDENT_STATUS,this.pageSize=s.a.PAGE_SIZE_LIST,this.STUDENT_URL=u.a.STUDENT,this.STAFF_URL=u.a.STAFF,this.approvedStudentCount=0,this.interestedStudentCount=0,this.isDisableBtn=!1}ngOnInit(){this.sharedService.refreshGetRoles(),this.subscription.add(this.sharedService.getLoggedInRoles.subscribe(t=>{this.loggedInRoles=t})),this.subscription.add(this.activatedRoute.paramMap.subscribe(t=>{this.projectId=Number(t.get(s.a.ID)),this.filterModel.filters.push(new m.a(s.a.PROJECT,s.a.EQ,this.projectId)),this.filterModel.order_by.push(new m.d(s.a.UPDATED_AT,s.a.DESC)),this.getProjectDetails(),this.getComments(),this.getEmailLogs()}))}getProjectDetails(){this.approvedStudentCount=0,this.interestedStudentCount=0,this.subscription.add(this.projectService.getProjectById(this.projectId).subscribe(t=>{this.project=t,this.project.students.forEach(t=>{t.status===s.a.STUDENT_STATUS.APPROVED?this.approvedStudentCount++:t.status===s.a.STUDENT_STATUS.INTERESTED&&this.interestedStudentCount++})}))}statusClassConditions(t){return{proposal:t===this.PROJECT_STATUS.PROPOSED,approve:t===this.PROJECT_STATUS.APPROVED,decline:t===this.PROJECT_STATUS.DECLINED,defer:t===this.PROJECT_STATUS.DEFERRED,withdraw:t===this.PROJECT_STATUS.WITHDRAWN,skip:t===this.PROJECT_STATUS.SKIPPED}}getComments(){this.subscription.add(this.projectService.getFilteredComments(this.filterModel).subscribe(t=>{this.commentModel=t}))}getEmailLogs(){this.subscription.add(this.projectService.getFilteredEmailLogs(this.filterModel).subscribe(t=>{this.dataSource=new l.k(t.objects),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))}downloadFile(){window.location.href=d.a.HOST+u.a.PROJECT_DOWNLOAD_API+this.project.file_name}openCommentModal(t){const e=new b.d;e.project=this.projectId,e.project_status=t,this.dialog.open(St,{width:s.a.MODAL_WIDTH,data:e}).afterClosed().subscribe(t=>{t&&(this.getProjectDetails(),this.getComments(),this.getEmailLogs())})}saveComment(){this.alertService.close(),this.isDisableBtn=!0,this.projectComment.last_updated_by=this.storageService.getUserName(),this.projectComment.commented_by=Number(this.storageService.getUserId()),this.projectComment.project=this.projectId,this.subscription.add(this.projectService.createComment(this.projectComment).subscribe(()=>{this.isDisableBtn=!1,this.getComments()},t=>{this.alertService.error(t.error.message),this.isDisableBtn=!1}))}getStaffURLForID(t){return{q:JSON.stringify(new m.a(s.a.ID,s.a.EQ,t))}}openProjectModal(){this.dialog.open(J,{width:s.a.MODAL_WIDTH,data:this.project}).afterClosed().subscribe(t=>{t&&this.getProjectDetails()})}getStudentsForProjectID(t,e){const n=new m.b;return n.filters.push(new m.a(s.a.PROJECTS,s.a.HAS,new m.a(s.a.ID,s.a.EQ,t))),n.filters.push(new m.a(s.a.STATUS,s.a.EQ,e)),{q:JSON.stringify(n)}}getStudentsForID(t){const e=new m.b;return e.filters.push(new m.a(s.a.ID,s.a.EQ,t)),{q:JSON.stringify(e)}}openSentEmailModal(){this.dialog.open(Nt,{width:s.a.MODAL_WIDTH,data:this.project}).afterClosed().subscribe(t=>{t&&this.getEmailLogs()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Ob(a.a),h.Ob(f.a),h.Ob(g.b),h.Ob(c.h),h.Ob(C.a),h.Ob(U.a),h.Ob(V.a))},t.\u0275cmp=h.Ib({type:t,selectors:[["app-project-details"]],viewQuery:function(t,e){var n;1&t&&(h.Ic(o.a,!0),h.Ic(i.a,!0)),2&t&&(h.sc(n=h.dc())&&(e.paginator=n.first),h.sc(n=h.dc())&&(e.sort=n.first))},decls:151,vars:63,consts:[[1,"mat-elevation-z1","m-auto","w-90","mt-2","mb-1","p-2"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mb-1"],["fxLayout","row","fxLayoutAlign","start center",1,"m-auto"],["mat-icon-button","","matTooltip","projects",1,"mr-1",3,"click"],["mat-icon-button","","class","ml-1","matTooltip","edit",3,"click",4,"ngIf"],["aria-label","status"],["disableRipple","",1,"mr-1",3,"ngClass"],["fxLayout","column","fxLayoutAlign","space-around start"],["fxLayout","row","fxLayoutAlign","space-between start",1,"w-100","mt-1"],[1,"mat-elevation-z0"],[1,"mat-card-subtitle","d-inline-block"],["matTooltip","Deadline",1,"mr-1"],["matTooltip","Deadline",1,"mr-1","v-align-super"],["matTooltip","Category",1,"mr-1","ml-1"],["class","mr-1 v-align-super","matTooltip","Category",4,"ngFor","ngForOf"],[1,"mt-1"],[1,"mat-card-subtitle"],[1,"mt-2"],[1,"ml-1"],["mat-flat-button","",1,"ml-1","text-link-color","text-underline",3,"disabled","click"],["class","mt-1",4,"ngIf"],[1,"mat-card-subtitle","d-inline-block","mr-5px"],[1,"mr-1"],["fxFlex","35",1,"mat-elevation-z0"],["mat-raised-button","","color","primary","class","w-100 mb-1",3,"click",4,"ngIf"],["mat-raised-button","",1,"w-100","mb-1","approve",3,"routerLink","queryParams"],["mat-stroked-button","","color","primary",1,"w-100","mb-1",3,"routerLink","queryParams"],[1,"font-size-20px","mt-1"],["matTooltip","Name","disableRipple",""],["mat-list-icon",""],["mat-line",""],["matTooltip","Email address","disableRipple",""],["matTooltip","Organisation","disableRipple",""],["matTooltip","Phone Number","disableRipple",""],["matTooltip","Created at","disableRipple",""],["matTooltip","Updated at","disableRipple",""],["matTooltip","Last updated by","disableRipple",""],["mat-stretch-tabs","",1,"w-100"],["label","Comments"],[1,"p-1"],[1,"mat-elevation-z0","w-auto"],[3,"ngSubmit",4,"ngIf"],["class","mt-1",4,"ngFor","ngForOf"],[4,"ngIf"],["label","Email Logs"],["mat-table","","matSort","","matSortDirection","desc",1,"mt-1","overflow-auto",3,"dataSource","matSortActive"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-icon-button","","matTooltip","edit",1,"ml-1",3,"click"],["matTooltip","Category",1,"mr-1","v-align-super"],[1,"mat-card-subtitle","d-inline-block","mr-1"],[1,"cursor-pointer","approve",3,"click"],[1,"mr-5px"],[1,"cursor-pointer","decline",3,"click"],[1,"cursor-pointer","defer",3,"click"],[1,"cursor-pointer","withdraw",3,"click"],[1,"cursor-pointer","skip",3,"click"],["mat-raised-button","","color","primary",1,"w-100","mb-1",3,"click"],[3,"ngSubmit"],["actionForm","ngForm"],["appearance","outline"],["matInput","","placeholder","Add your comment","name","comment","required","",3,"ngModel","ngModelChange"],["comment","ngModel"],["color","primary","mat-raised-button","",3,"ngClass","disabled","click"],["class","mat-text-warn",4,"ngIf"],[1,"mat-text-warn"],["mat-card-avatar","",1,"comment-header-image"],[1,"cursor-pointer","text-link-color",3,"matTooltip","routerLink","queryParams"],["matTooltip","commented at"],["aria-label","status",4,"ngIf"],["matTooltip","Email sent",4,"ngIf"],["class","text-link-color","mat-flat-button","",3,"routerLink","queryParams",4,"ngIf"],["matTooltip","Email sent"],["mat-flat-button","",1,"text-link-color",3,"routerLink","queryParams"],[1,"mat-card-subtitle","text-center"],["mat-header-cell",""],["mat-cell",""],["matTooltip","Student",4,"ngIf"],["matTooltip","Project author",4,"ngIf"],["matTooltip","Student"],["matTooltip","Project author"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"matTooltip"],["mat-header-row",""],["mat-row",""],[1,"mat-card-subtitle","text-center","mt-1"]],template:function(t,e){1&t&&(h.Ub(0,"mat-card",0),h.Ub(1,"mat-card-header",1),h.Ub(2,"mat-card-title",2),h.Ub(3,"button",3),h.cc("click",(function(){return e.location.back()})),h.Ub(4,"mat-icon"),h.Dc(5,"arrow_back"),h.Tb(),h.Tb(),h.Dc(6),h.Cc(7,Vt,3,0,"button",4),h.Tb(),h.Ub(8,"mat-chip-list",5),h.Ub(9,"mat-chip",6),h.Dc(10),h.hc(11,"titlecase"),h.Tb(),h.Tb(),h.Tb(),h.Pb(12,"mat-divider"),h.Ub(13,"div",7),h.Ub(14,"div",8),h.Ub(15,"mat-card",9),h.Ub(16,"div",10),h.Ub(17,"span",11),h.Ub(18,"mat-icon"),h.Dc(19,"schedule"),h.Tb(),h.Tb(),h.Ub(20,"span",12),h.Dc(21),h.hc(22,"date"),h.Tb(),h.Ub(23,"span",13),h.Ub(24,"mat-icon"),h.Dc(25,"category"),h.Tb(),h.Tb(),h.Cc(26,Ht,2,1,"span",14),h.Tb(),h.Ub(27,"div",15),h.Ub(28,"span",16),h.Dc(29,"Description"),h.Tb(),h.Ub(30,"p"),h.Dc(31),h.Tb(),h.Tb(),h.Ub(32,"div",17),h.Ub(33,"span",10),h.Dc(34,"Location"),h.Tb(),h.Ub(35,"span",18),h.Dc(36),h.Tb(),h.Tb(),h.Ub(37,"div"),h.Ub(38,"span",10),h.Dc(39,"Availability"),h.Tb(),h.Ub(40,"span",18),h.Dc(41),h.Tb(),h.Tb(),h.Ub(42,"div"),h.Ub(43,"span",10),h.Dc(44,"Platform"),h.Tb(),h.Ub(45,"span",18),h.Dc(46),h.Tb(),h.Tb(),h.Ub(47,"div"),h.Ub(48,"span",10),h.Dc(49,"Attachment"),h.Tb(),h.Ub(50,"button",19),h.cc("click",(function(){return e.downloadFile()})),h.Dc(51),h.Tb(),h.Tb(),h.Cc(52,$t,24,0,"div",20),h.Ub(53,"div",17),h.Ub(54,"span",21),h.Dc(55,"Created at"),h.Tb(),h.Ub(56,"span",22),h.Dc(57),h.hc(58,"dateAgo"),h.Tb(),h.Ub(59,"span",21),h.Dc(60,"Updated at"),h.Tb(),h.Ub(61,"span",22),h.Dc(62),h.hc(63,"dateAgo"),h.Tb(),h.Ub(64,"span",21),h.Dc(65,"Updated by"),h.Tb(),h.Ub(66,"span",22),h.Dc(67),h.Tb(),h.Tb(),h.Tb(),h.Ub(68,"mat-card",23),h.Cc(69,zt,4,0,"button",24),h.Ub(70,"a",25),h.Ub(71,"mat-icon"),h.Dc(72,"school"),h.Tb(),h.Dc(73),h.Tb(),h.Ub(74,"a",26),h.Ub(75,"mat-icon"),h.Dc(76,"school"),h.Tb(),h.Dc(77),h.Tb(),h.Ub(78,"mat-card-subtitle",27),h.Dc(79,"Project Author (Client)"),h.Tb(),h.Ub(80,"mat-list"),h.Ub(81,"mat-list-item",28),h.Ub(82,"mat-icon",29),h.Dc(83,"person"),h.Tb(),h.Ub(84,"span",30),h.Dc(85),h.Tb(),h.Tb(),h.Ub(86,"mat-list-item",31),h.Ub(87,"mat-icon",29),h.Dc(88,"email"),h.Tb(),h.Ub(89,"span",30),h.Dc(90),h.Tb(),h.Tb(),h.Ub(91,"mat-list-item",32),h.Ub(92,"mat-icon",29),h.Dc(93,"business"),h.Tb(),h.Ub(94,"span",30),h.Dc(95),h.Tb(),h.Tb(),h.Ub(96,"mat-list-item",33),h.Ub(97,"mat-icon",29),h.Dc(98,"call"),h.Tb(),h.Ub(99,"span",30),h.Dc(100),h.Tb(),h.Tb(),h.Ub(101,"mat-list-item",34),h.Ub(102,"mat-icon",29),h.Dc(103,"event"),h.Tb(),h.Ub(104,"span",30),h.Dc(105),h.hc(106,"dateAgo"),h.Tb(),h.Tb(),h.Ub(107,"mat-list-item",35),h.Ub(108,"mat-icon",29),h.Dc(109,"event"),h.Tb(),h.Ub(110,"span",30),h.Dc(111),h.hc(112,"dateAgo"),h.Tb(),h.Tb(),h.Ub(113,"mat-list-item",36),h.Ub(114,"mat-icon",29),h.Dc(115,"how_to_reg"),h.Tb(),h.Ub(116,"span",30),h.Dc(117),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Ub(118,"div",8),h.Ub(119,"mat-tab-group",37),h.Ub(120,"mat-tab",38),h.Ub(121,"div",39),h.Ub(122,"mat-card",40),h.Pb(123,"app-alert"),h.Cc(124,Gt,12,4,"form",41),h.Cc(125,ce,15,15,"mat-card",42),h.Cc(126,ae,3,0,"div",43),h.Tb(),h.Tb(),h.Tb(),h.Ub(127,"mat-tab",44),h.Ub(128,"table",45),h.Sb(129,46),h.Cc(130,oe,1,0,"th",47),h.Cc(131,le,3,2,"td",48),h.Rb(),h.Sb(132,46),h.Cc(133,se,2,0,"th",49),h.Cc(134,be,2,1,"td",48),h.Rb(),h.Sb(135,46),h.Cc(136,ue,2,0,"th",49),h.Cc(137,de,2,2,"td",50),h.Rb(),h.Sb(138,46),h.Cc(139,me,2,0,"th",49),h.Cc(140,pe,2,1,"td",48),h.Rb(),h.Sb(141,46),h.Cc(142,ge,2,0,"th",49),h.Cc(143,he,2,1,"td",48),h.Rb(),h.Sb(144,46),h.Cc(145,fe,2,0,"th",49),h.Cc(146,Te,3,3,"td",48),h.Rb(),h.Cc(147,Ce,1,0,"tr",51),h.Cc(148,Ue,1,0,"tr",52),h.Tb(),h.Cc(149,De,3,0,"div",43),h.Pb(150,"mat-paginator",53),h.Tb(),h.Tb(),h.Tb(),h.Tb(),h.Tb()),2&t&&(h.Cb(6),h.Fc(" ",e.project.title," "),h.Cb(1),h.nc("ngIf",e.loggedInRoles.isAdmin||e.loggedInRoles.isSecondLevel||e.loggedInRoles.isThirdLevel),h.Cb(2),h.nc("ngClass",e.statusClassConditions(null==e.project?null:e.project.status)),h.Cb(1),h.Ec(h.ic(11,46,null==e.project?null:e.project.status)),h.Cb(11),h.Fc(" ",h.jc(22,48,null==e.project?null:e.project.deadline,"short")||"Not available"," "),h.Cb(5),h.nc("ngForOf",null==e.project?null:e.project.category),h.Cb(5),h.Ec(null==e.project?null:e.project.description),h.Cb(5),h.Gc("",(null==e.project?null:e.project.city)||"Not available",", ",(null==e.project?null:e.project.country)||"Not available",""),h.Cb(5),h.Ec((null==e.project?null:e.project.availability)||"Not available"),h.Cb(5),h.Ec((null==e.project?null:e.project.platform)||"Not available"),h.Cb(4),h.nc("disabled",!(null!=e.project&&e.project.file_name)),h.Cb(1),h.Fc(" ",(null==e.project?null:e.project.file_name)||"Not available"," "),h.Cb(1),h.nc("ngIf",e.loggedInRoles.isAdmin||e.loggedInRoles.isThirdLevel),h.Cb(5),h.Ec(h.ic(58,51,null==e.project?null:e.project.created_at)||"Not available"),h.Cb(5),h.Ec(h.ic(63,53,null==e.project?null:e.project.updated_at)||"Not available"),h.Cb(5),h.Ec((null==e.project?null:e.project.last_updated_by)||"Not available"),h.Cb(2),h.nc("ngIf",e.loggedInRoles.isAdmin||e.loggedInRoles.isSecondLevel||e.loggedInRoles.isThirdLevel),h.Cb(1),h.nc("routerLink",h.pc(59,Se,e.STUDENT_URL))("queryParams",e.getStudentsForProjectID(e.project.id,e.STUDENT_STATUS.APPROVED)),h.Cb(3),h.Fc(" View Approved Students (",e.approvedStudentCount,") "),h.Cb(1),h.nc("routerLink",h.pc(61,Se,e.STUDENT_URL))("queryParams",e.getStudentsForProjectID(e.project.id,e.STUDENT_STATUS.INTERESTED)),h.Cb(3),h.Fc(" View Interested Students (",e.interestedStudentCount,") "),h.Cb(8),h.Ec((null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.name)||"Not available"),h.Cb(5),h.Ec((null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.email)||"Not available"),h.Cb(5),h.Ec((null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.organisation_name)||"Not available"),h.Cb(5),h.Ec((null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.phone_number)||"Not available"),h.Cb(5),h.Ec(h.ic(106,55,null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.created_at)||"Not available"),h.Cb(6),h.Ec(h.ic(112,57,null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.updated_at)||"Not available"),h.Cb(6),h.Ec((null==e.project||null==e.project.proposal_authors?null:e.project.proposal_authors.last_updated_by)||"Not available"),h.Cb(7),h.nc("ngIf",e.loggedInRoles.isAdmin||e.loggedInRoles.isSecondLevel||e.loggedInRoles.isThirdLevel),h.Cb(1),h.nc("ngForOf",e.commentModel.objects),h.Cb(1),h.nc("ngIf",0===(null==e.commentModel||null==e.commentModel.objects?null:e.commentModel.objects.length)),h.Cb(2),h.nc("dataSource",e.dataSource)("matSortActive",e.displayedColumns[5]),h.Cb(1),h.nc("matColumnDef",e.displayedColumns[0]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[1]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[2]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[3]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[4]),h.Cb(3),h.nc("matColumnDef",e.displayedColumns[5]),h.Cb(3),h.nc("matHeaderRowDef",e.displayedColumns),h.Cb(1),h.nc("matRowDefColumns",e.displayedColumns),h.Cb(1),h.nc("ngIf",0===(null==e.dataSource?null:e.dataSource.data.length)),h.Cb(1),h.nc("pageSizeOptions",e.pageSize))},directives:[H.a,H.d,M.c,M.b,H.g,w.b,qt.a,z.a,c.l,Q.c,Q.a,c.j,$.a,c.k,M.a,w.a,a.f,H.f,xt.a,xt.c,xt.b,_.j,Jt.b,Jt.a,D.a,l.j,i.a,l.c,l.e,l.b,l.g,l.i,o.a,S.r,S.l,S.m,v.c,v.g,j.b,S.b,S.p,S.k,S.n,v.b,H.b,a.d,H.c,Q.b,l.d,l.a,i.b,l.f,l.h],pipes:[c.u,c.e,Bt],styles:[".mat-list-base[_ngcontent-%COMP%]   .mat-list-item.mat-list-item-with-avatar[_ngcontent-%COMP%]{height:36px!important}.approve[_ngcontent-%COMP%], .decline[_ngcontent-%COMP%], .defer[_ngcontent-%COMP%], .proposal[_ngcontent-%COMP%], .skip[_ngcontent-%COMP%], .withdraw[_ngcontent-%COMP%]{color:#f3f3f3!important}.proposal[_ngcontent-%COMP%]{background-color:#fbc02d}.approve[_ngcontent-%COMP%]{background-color:#2e7d32}.decline[_ngcontent-%COMP%]{background-color:#b71c1c}.defer[_ngcontent-%COMP%]{background-color:#e65100}.withdraw[_ngcontent-%COMP%]{background-color:#4a148c}.skip[_ngcontent-%COMP%]{background-color:#616161}.comment-header-image[_ngcontent-%COMP%]{background-image:url(user-avatar.98d79ab0503c2f1f5bf6.png);background-size:cover}"]}),t})()}];var je=n("+Y8+"),Ie=n("5MR1");let ye=(()=>{class t{}return t.\u0275mod=h.Mb({type:t}),t.\u0275inj=h.Lb({factory:function(e){return new(e||t)},providers:[f.a],imports:[[a.g.forChild(ve),c.c,H.e,M.d,w.c,$.b,v.e,j.c,je.a,l.l,i.c,Ct.b,qt.b,z.b,o.b,Q.d,xt.d,g.e,Ie.a,S.g,I.b,y.c,_.l,G.b,Jt.c]]}),t})()}}]);